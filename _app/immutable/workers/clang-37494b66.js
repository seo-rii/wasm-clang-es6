let t,i;async function g(r,s){const{default:o}=await import("./chunks/index-fc6079b5.js");i=new o({stdout:a=>postMessage({output:a}),stdin:()=>{for(;;)if(postMessage({buffer:!0}),Atomics.wait(t,0,0,100)==="not-equal")try{const e=new Int32Array(t.byteLength);e.set(t),t.fill(0);const n=new TextDecoder().decode(e).replace(/\x00/g,""),c=parseInt(n.slice(-1));return n.slice(0,-c)}catch(e){postMessage({log:{e}})}},log:s,path:r})}self.onmessage=async r=>{const{code:s,buffer:o,load:a,interrupt:e,log:l,path:n}=r.data;if(a)await g(n,l),postMessage({load:!0});else if(s){t=new Int32Array(o);try{await i.compileLinkRun(s),self.postMessage({results:!0})}catch(c){self.postMessage({error:c.message})}}};
