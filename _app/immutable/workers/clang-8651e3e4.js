self.document={querySelectorAll(){return[]}};let e,i;async function g(o,s){const{default:r}=await import("./chunks/index-74f04275.js");i=new r({stdout:a=>postMessage({output:a}),stdin:()=>{for(;;)if(postMessage({buffer:!0}),Atomics.wait(e,0,0,100)==="not-equal")try{const t=new Int32Array(e.byteLength);t.set(e),e.fill(0);const n=new TextDecoder().decode(t).replace(/\x00/g,""),l=parseInt(n.slice(-1));return n.slice(0,-l)}catch(t){postMessage({log:{e:t}})}},log:s,path:o})}self.onmessage=async o=>{const{code:s,buffer:r,load:a,interrupt:t,log:f,path:n,prepare:l}=o.data;if(a)await g(n,f),postMessage({load:!0});else if(l){e=new Int32Array(r);try{await i.compileLink(s),self.postMessage({results:!0})}catch(c){self.postMessage({error:c.message})}}else if(s){e=new Int32Array(r);try{await i.compileLinkRun(s),self.postMessage({results:!0})}catch(c){self.postMessage({error:c.message})}}};
